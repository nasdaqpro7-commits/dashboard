<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard NASDAQ PRO - Premium Edition</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;600;700;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
<style>
:root {
 --sidebar-bg: #0a0d1a;
 --main-bg: #050711;
 --card-bg: #0f1420;
 --card-hover: #161b2e;
 --border: rgba(99,102,241,0.15);
 --border-bright: rgba(99,102,241,0.4);
 --text: #f8fafc;
 --text-dim: #cbd5e1;
 --muted: #64748b;
 --green: #10b981;
 --green-glow: rgba(16,185,129,0.3);
 --red: #ef4444;
 --red-glow: rgba(239,68,68,0.3);
 --yellow: #fbbf24;
 --blue: #6366f1;
 --blue-bright: #818cf8;
 --purple: #a855f7;
 --orange: #f97316;
 --cyan: #06b6d4;
 
 --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
 --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
 --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
 --shadow-glow: 0 0 20px rgba(99,102,241,0.4);
}

* {
 margin: 0;
 padding: 0;
 box-sizing: border-box;
}

body {
 font-family: 'Archivo', -apple-system, BlinkMacSystemFont, sans-serif;
 background: var(--main-bg);
 color: var(--text);
 display: flex;
 justify-content: center;
 min-height: 100vh;
 overflow-x: hidden;
 position: relative;
}

body::before {
 content: '';
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 bottom: 0;
 background: 
  radial-gradient(circle at 20% 50%, rgba(99,102,241,0.08) 0%, transparent 50%),
  radial-gradient(circle at 80% 80%, rgba(168,85,247,0.08) 0%, transparent 50%);
 pointer-events: none;
 z-index: 0;
}

.dashboard-container {
 display: flex;
 max-width: 1800px;
 width: 100%;
 min-height: 100vh;
 position: relative;
 z-index: 1;
}

/* ========== SIDEBAR ========== */
.sidebar {
 width: 280px;
 background: var(--sidebar-bg);
 padding: 32px 20px;
 border-right: 1px solid var(--border);
 overflow-y: auto;
 display: flex;
 flex-direction: column;
 flex-shrink: 0;
 position: relative;
}

.sidebar::before {
 content: '';
 position: absolute;
 top: 0;
 right: 0;
 width: 1px;
 height: 100%;
 background: linear-gradient(180deg, transparent, var(--blue), transparent);
 opacity: 0.5;
}

.logo {
 display: flex;
 align-items: center;
 justify-content: center;
 margin-bottom: 40px;
 padding: 20px;
 background: linear-gradient(135deg, rgba(99,102,241,0.1), rgba(168,85,247,0.1));
 border-radius: 16px;
 border: 1px solid var(--border);
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.logo:hover {
 transform: translateY(-2px);
 box-shadow: var(--shadow-glow);
 border-color: var(--border-bright);
}

.logo img {
 max-height: 80px;
 width: auto;
 max-width: 100%;
 filter: drop-shadow(0 4px 12px rgba(99,102,241,0.4));
}

.filters {
 margin-bottom: 24px;
 animation: slideInLeft 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideInLeft {
 from {
  opacity: 0;
  transform: translateX(-20px);
 }
 to {
  opacity: 1;
  transform: translateX(0);
 }
}

.filter-group {
 margin-bottom: 20px;
}

.filter-group label {
 display: block;
 font-size: 12px;
 text-transform: uppercase;
 letter-spacing: 1.5px;
 color: var(--text-dim);
 margin-bottom: 10px;
 font-weight: 700;
}

.filter-group select {
 width: 100%;
 background: var(--card-bg);
 color: var(--text);
 border: 1px solid var(--border);
 padding: 14px 16px;
 border-radius: 12px;
 font-size: 15px;
 font-weight: 600;
 cursor: pointer;
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 font-family: 'JetBrains Mono', monospace;
}

.filter-group select:hover {
 border-color: var(--blue-bright);
 background: var(--card-hover);
 transform: translateY(-1px);
}

.filter-group select:focus {
 outline: none;
 border-color: var(--blue);
 box-shadow: 0 0 0 4px rgba(99,102,241,0.15);
}

.filter-group select:disabled {
 opacity: 0.4;
 cursor: not-allowed;
 transform: none;
}

.mode-toggle {
 width: 100%;
 background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
 color: white;
 border: none;
 padding: 18px 20px;
 border-radius: 14px;
 font-weight: 800;
 font-size: 15px;
 cursor: pointer;
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 display: grid;
 grid-template-columns: 20px 1fr;
 align-items: center;
 justify-items: center;
 gap: 0;
 text-transform: uppercase;
 letter-spacing: 2.5px;
 margin-top: 24px;
 position: relative;
 overflow: hidden;
 box-shadow: 0 4px 12px rgba(99,102,241,0.3);
}

.mode-toggle span {
 display: inline-block;
}

.mode-toggle #modeIcon {
 font-size: 18px;
 line-height: 1;
 justify-self: end;
}

.mode-toggle #modeText {
 font-size: 15px;
 font-weight: 800;
 letter-spacing: 2.5px;
 justify-self: start;
 margin-left: 8px;
}

.mode-toggle::before {
 content: '';
 position: absolute;
 top: 0;
 left: -100%;
 width: 100%;
 height: 100%;
 background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
 transition: left 0.5s;
}

.mode-toggle:hover::before {
 left: 100%;
}

.mode-toggle:hover {
 transform: translateY(-3px);
 box-shadow: 0 12px 28px rgba(99,102,241,0.5);
}

.mode-toggle:active {
 transform: translateY(-1px);
}

.mode-toggle.basic {
 background: linear-gradient(135deg, var(--cyan) 0%, var(--blue) 100%);
}

.stats-sidebar {
 margin-top: auto;
 padding-top: 24px;
 border-top: 1px solid var(--border);
 animation: fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
}

@keyframes fadeIn {
 from { opacity: 0; }
 to { opacity: 1; }
}

.sidebar-stat {
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 14px;
 margin-bottom: 10px;
 background: rgba(99,102,241,0.05);
 border-radius: 10px;
 font-size: 14px;
 transition: all 0.2s;
}

.sidebar-stat:hover {
 background: rgba(99,102,241,0.1);
 transform: translateX(4px);
}

.sidebar-stat span:first-child {
 color: var(--text-dim);
 font-weight: 600;
}

.sidebar-stat span:last-child {
 color: var(--text);
 font-weight: 800;
 font-family: 'JetBrains Mono', monospace;
 font-size: 15px;
}

/* ========== MAIN CONTENT ========== */
.main-content {
 flex: 1;
 padding: 32px 40px;
 overflow-y: auto;
 overflow-x: hidden;
}

.header-main {
 margin-bottom: 36px;
 animation: slideDown 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideDown {
 from {
  opacity: 0;
  transform: translateY(-20px);
 }
 to {
  opacity: 1;
  transform: translateY(0);
 }
}

.header-main h1 {
 font-size: 40px;
 font-weight: 900;
 margin-bottom: 0;
 background: linear-gradient(135deg, var(--text) 0%, var(--blue-bright) 100%);
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 background-clip: text;
 letter-spacing: -1px;
}

/* ========== KPIs ========== */
.kpis {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
 gap: 20px;
 margin-bottom: 32px;
 animation: staggerIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes staggerIn {
 from {
  opacity: 0;
  transform: translateY(20px);
 }
 to {
  opacity: 1;
  transform: translateY(0);
 }
}

.kpi {
 background: var(--card-bg);
 padding: 24px;
 border-radius: 16px;
 border: 1px solid var(--border);
 position: relative;
 overflow: hidden;
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 min-height: 110px;
 display: flex;
 flex-direction: column;
 justify-content: space-between;
}

.kpi::before {
 content: '';
 position: absolute;
 top: 0;
 left: 0;
 width: 100%;
 height: 3px;
 transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 z-index: 0;
 pointer-events: none;
}

.kpi:hover {
 transform: translateY(-4px);
 box-shadow: var(--shadow-lg);
 border-color: var(--border-bright);
}

.kpi:hover::before {
 height: 100%;
 opacity: 0.05;
}

.kpi-dias::before { background: var(--blue); }
.kpi-trades::before { background: var(--purple); }
.kpi-pontos::before { background: var(--green); }
.kpi-acc::before { background: var(--orange); }
.kpi-gains::before { background: var(--green); }
.kpi-stops::before { background: var(--red); }
.kpi-zero::before { background: var(--yellow); }

.kpi span {
 display: block;
 font-size: 12px;
 text-transform: uppercase;
 letter-spacing: 1.5px;
 color: var(--text-dim);
 font-weight: 700;
 margin-bottom: 12px;
 opacity: 0.95;
 position: relative;
 z-index: 1;
}

.kpi strong {
 display: block;
 font-size: 36px;
 font-weight: 900;
 line-height: 1;
 font-family: 'JetBrains Mono', monospace;
 letter-spacing: -1px;
 position: relative;
 z-index: 1;
}

.kpi input {
 background: var(--main-bg);
 color: var(--text);
 border: 2px solid var(--blue);
 border-radius: 10px;
 padding: 12px;
 font-size: 24px;
 font-weight: 800;
 width: 100%;
 margin-top: 8px;
 text-align: center;
 font-family: 'JetBrains Mono', monospace;
 transition: all 0.2s;
 cursor: text;
}

.kpi input:focus {
 outline: none;
 border-color: var(--blue-bright);
 box-shadow: 0 0 0 4px rgba(99,102,241,0.2);
}

.kpi input:hover {
 border-color: var(--blue-bright);
}

.kpi input::placeholder {
 color: var(--muted);
 opacity: 0.5;
}

.contratos-control {
 display: flex;
 align-items: center;
 justify-content: center;
 gap: 12px;
 margin-top: 8px;
 position: relative;
 z-index: 10;
}

.btn-control {
 background: var(--blue);
 color: white;
 border: none;
 border-radius: 8px;
 width: 40px;
 height: 40px;
 font-size: 24px;
 font-weight: 800;
 cursor: pointer;
 transition: all 0.2s;
 display: flex;
 align-items: center;
 justify-content: center;
 pointer-events: auto;
 z-index: 10;
 position: relative;
}

.btn-control:hover {
 background: var(--blue-bright);
 transform: scale(1.1);
 box-shadow: 0 4px 12px rgba(99,102,241,0.5);
}

.btn-control:active {
 transform: scale(0.95);
 box-shadow: 0 2px 6px rgba(99,102,241,0.5);
}

.valor-contratos {
 background: var(--main-bg);
 color: var(--text);
 border: 2px solid var(--blue);
 border-radius: 10px;
 padding: 8px 24px;
 font-size: 28px;
 font-weight: 900;
 font-family: 'JetBrains Mono', monospace;
 min-width: 80px;
 text-align: center;
 user-select: none;
}

.kpi input:focus {
 outline: none;
 border-color: var(--blue);
 box-shadow: 0 0 0 4px rgba(99,102,241,0.15);
}

.kpi input:hover {
 border-color: var(--blue-bright);
}

/* ========== CHARTS ========== */
.charts {
 display: grid;
 grid-template-columns: 2fr 1fr;
 gap: 20px;
 margin-bottom: 32px;
 animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
}

@keyframes fadeInUp {
 from {
  opacity: 0;
  transform: translateY(30px);
 }
 to {
  opacity: 1;
  transform: translateY(0);
 }
}

.chart-card {
 background: var(--card-bg);
 padding: 28px;
 border-radius: 16px;
 border: 1px solid var(--border);
 display: flex;
 flex-direction: column;
 height: 460px;
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 position: relative;
 overflow: hidden;
}

.chart-card::after {
 content: '';
 position: absolute;
 top: -50%;
 left: -50%;
 width: 200%;
 height: 200%;
 background: radial-gradient(circle, rgba(99,102,241,0.03) 0%, transparent 70%);
 opacity: 0;
 transition: opacity 0.5s;
}

.chart-card:hover::after {
 opacity: 1;
}

.chart-card:hover {
 border-color: var(--border-bright);
 box-shadow: var(--shadow-md);
}

.chart-card h3 {
 font-size: 18px;
 margin-bottom: 20px;
 font-weight: 700;
 display: flex;
 align-items: center;
 gap: 10px;
 color: var(--text-dim);
 letter-spacing: -0.5px;
 position: relative;
 z-index: 1;
}

.chart-wrap {
 flex: 1;
 position: relative;
 min-height: 0;
 z-index: 1;
}

canvas {
 width: 100% !important;
 height: 100% !important;
}

/* ========== CALENDAR ========== */
.calendar-wrapper {
 margin-bottom: 32px;
 background: var(--card-bg);
 border: 1px solid var(--border);
 border-radius: 16px;
 padding: 24px;
 animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
 transition: all 0.3s;
}

.calendar-wrapper:hover {
 border-color: var(--border-bright);
}

.calendar-wrapper > strong {
 display: block;
 margin-bottom: 24px;
 font-size: 18px;
 font-weight: 700;
 color: var(--text-dim);
}

.calendar-header {
 display: grid;
 grid-template-columns: repeat(7, 1fr);
 margin-bottom: 16px;
 text-align: center;
 color: var(--text-dim);
 font-size: 14px;
 font-weight: 800;
 text-transform: uppercase;
 letter-spacing: 1.5px;
}

.calendar-grid {
 display: grid;
 grid-template-columns: repeat(7, 1fr);
 gap: 8px;
}

.day {
 position: relative;
 background: linear-gradient(135deg, rgba(15,20,32,0.8), var(--card-bg));
 border: 1px solid var(--border);
 border-radius: 12px;
 min-height: 80px;
 padding: 8px;
 padding-bottom: 28px;
 display: flex;
 flex-direction: column;
 justify-content: flex-start;
 gap: 2px;
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 cursor: pointer;
}

.day.positive {
 background: linear-gradient(135deg, rgba(16,185,129,0.08), var(--card-bg));
 border-color: rgba(16,185,129,0.3);
}

.day.negative {
 background: linear-gradient(135deg, rgba(239,68,68,0.08), var(--card-bg));
 border-color: rgba(239,68,68,0.3);
}

.day:hover:not(.empty) {
 transform: translateY(-4px) scale(1.02);
 box-shadow: var(--shadow-lg);
 border-color: var(--blue-bright);
 z-index: 10;
}

.day.positive:hover {
 box-shadow: 0 8px 32px var(--green-glow);
}

.day.negative:hover {
 box-shadow: 0 8px 32px var(--red-glow);
}

.day-number {
 font-size: 12px;
 color: var(--muted);
 font-weight: 700;
 font-family: 'JetBrains Mono', monospace;
}

.day-points {
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 26px;
 font-weight: 900;
 font-family: 'JetBrains Mono', monospace;
 margin-top: 2px;
 margin-bottom: 6px;
}

.day-info {
 font-size: 11px;
 color: var(--text-dim);
 text-align: center;
 line-height: 1.5;
 font-weight: 600;
}

.day-badge {
 position: absolute;
 bottom: 4px;
 left: 50%;
 transform: translateX(-50%);
 background: rgba(0,0,0,0.95);
 backdrop-filter: blur(10px);
 border: 1px solid var(--border-bright);
 border-radius: 6px;
 padding: 4px 8px;
 font-size: 9px;
 white-space: nowrap;
 opacity: 0;
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 font-weight: 700;
 font-family: 'JetBrains Mono', monospace;
 letter-spacing: 0.3px;
 z-index: 100;
 pointer-events: none;
}

.day:hover .day-badge {
 opacity: 1;
}

.empty {
 background: transparent;
 border: none;
 cursor: default;
}

/* ========== TABLE ========== */
.table-card {
 background: var(--card-bg);
 border: 1px solid var(--border);
 border-radius: 16px;
 padding: 28px;
 margin-bottom: 32px;
 animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
 transition: all 0.3s;
}

.table-card:hover {
 border-color: var(--border-bright);
}

.table-card > strong {
 display: block;
 margin-bottom: 24px;
 font-size: 18px;
 font-weight: 700;
 color: var(--text-dim);
}

.table-wrap {
 overflow-x: auto;
 border-radius: 12px;
}

table {
 width: 100%;
 min-width: 900px;
 border-collapse: separate;
 border-spacing: 0;
}

thead {
 background: linear-gradient(135deg, rgba(99,102,241,0.1), rgba(168,85,247,0.1));
}

th {
 color: var(--blue-bright);
 font-weight: 700;
 font-size: 13px;
 padding: 18px 14px;
 text-align: center;
 text-transform: uppercase;
 letter-spacing: 1.5px;
 border-bottom: 2px solid var(--border-bright);
}

td {
 padding: 16px 14px;
 border-bottom: 1px solid var(--border);
 text-align: center;
 font-size: 14px;
 font-weight: 600;
 font-family: 'JetBrains Mono', monospace;
}

thead th:first-child,
tbody td:first-child {
 text-align: left;
 padding-left: 20px;
 font-family: 'Archivo', sans-serif;
}

tr.total {
 background: linear-gradient(135deg, rgba(16,185,129,0.08), rgba(99,102,241,0.08));
 font-weight: 800;
}

tr.total td {
 border-bottom: none;
 padding: 20px 14px;
 font-size: 15px;
}

tbody tr {
 transition: all 0.2s;
}

tbody tr:hover {
 background: rgba(99,102,241,0.08);
 transform: scale(1.01);
}

/* ========== MODO B√ÅSICO ========== */
body.basic-mode .pro-only {
 display: none !important;
}

/* ========== LOADING ========== */
.loading-overlay {
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 bottom: 0;
 background: var(--main-bg);
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 z-index: 9999;
 opacity: 1;
 transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.loading-overlay.hidden {
 opacity: 0;
 pointer-events: none;
}

.spinner {
 width: 70px;
 height: 70px;
 border: 4px solid var(--border);
 border-top-color: var(--blue);
 border-bottom-color: var(--purple);
 border-radius: 50%;
 animation: spin 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
 margin-bottom: 24px;
}

@keyframes spin {
 to { transform: rotate(360deg); }
}

.loading-text {
 color: var(--text-dim);
 font-size: 14px;
 font-weight: 600;
 letter-spacing: 2px;
 text-transform: uppercase;
 animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
 0%, 100% { opacity: 0.5; }
 50% { opacity: 1; }
}

/* ========== PERFORMANCE INDICATOR ========== */
.performance-indicator {
 position: fixed;
 top: 20px;
 right: 20px;
 background: var(--card-bg);
 border: 1px solid var(--border);
 border-radius: 12px;
 padding: 12px 16px;
 display: flex;
 align-items: center;
 gap: 10px;
 font-size: 13px;
 font-weight: 700;
 z-index: 100;
 opacity: 0;
 animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1) 1s forwards;
 box-shadow: var(--shadow-md);
}

@keyframes slideInRight {
 from {
  opacity: 0;
  transform: translateX(100px);
 }
 to {
  opacity: 1;
  transform: translateX(0);
 }
}

.performance-dot {
 width: 10px;
 height: 10px;
 border-radius: 50%;
 animation: glow 2s ease-in-out infinite;
}

.performance-dot.positive { background: var(--green); }
.performance-dot.negative { background: var(--red); }
.performance-dot.neutral { background: var(--yellow); }

@keyframes glow {
 0%, 100% { box-shadow: 0 0 5px currentColor; }
 50% { box-shadow: 0 0 20px currentColor; }
}

/* ========== SCROLLBAR ========== */
::-webkit-scrollbar {
 width: 8px;
 height: 8px;
}

::-webkit-scrollbar-track {
 background: var(--main-bg);
}

::-webkit-scrollbar-thumb {
 background: var(--border-bright);
 border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
 background: var(--blue);
}

/* ========== RESPONSIVE ========== */
@media (max-width: 1200px) {
 .charts {
  grid-template-columns: 1fr;
 }
}

@media (max-width: 1024px) {
 .dashboard-container {
  flex-direction: column;
 }
 
 .sidebar {
  width: 100%;
  border-right: none;
  border-bottom: 1px solid var(--border);
  padding: 24px 20px;
 }
 
 .sidebar::before {
  width: 100%;
  height: 1px;
  top: auto;
  bottom: 0;
  background: linear-gradient(90deg, transparent, var(--blue), transparent);
 }
 
 .main-content {
  padding: 24px 20px;
 }
 
 .header-main h1 {
  font-size: 32px;
 }
}

@media (max-width: 768px) {
 .kpis {
  grid-template-columns: repeat(2, 1fr);
 }
 
 .calendar-grid {
  gap: 8px;
 }
 
 .day {
  min-height: 80px;
  padding: 8px;
  padding-bottom: 32px;
 }
 
 .day-points {
  font-size: 20px;
 }
 
 .day-info {
  font-size: 9px;
 }
 
 .chart-card {
  height: 350px;
 }
}

@media (max-width: 480px) {
 .kpis {
  grid-template-columns: 1fr;
 }
 
 .header-main h1 {
  font-size: 28px;
 }
 
 .performance-indicator {
  top: 10px;
  right: 10px;
  font-size: 11px;
  padding: 8px 12px;
 }
}

/* ========== TOOLTIP ========== */
.tooltip {
 position: absolute;
 background: rgba(0,0,0,0.95);
 color: var(--text);
 padding: 12px 16px;
 border-radius: 8px;
 font-size: 12px;
 font-weight: 600;
 pointer-events: none;
 opacity: 0;
 transition: opacity 0.2s;
 z-index: 1000;
 border: 1px solid var(--border-bright);
 backdrop-filter: blur(10px);
 white-space: nowrap;
}

.tooltip.show {
 opacity: 1;
}
</style>
</head>
<body>

<div class="loading-overlay" id="loading">
 <div class="spinner"></div>
 <div class="loading-text">Carregando Dashboard...</div>
</div>

<div class="performance-indicator" id="perfIndicator" style="display: none;">
 <div class="performance-dot neutral"></div>
 <span id="perfText">Carregando...</span>
</div>

<div class="dashboard-container">
<!-- SIDEBAR -->
<div class="sidebar">
 <div class="logo">
  <img src="logo.png" alt="Mentoria NasdaqPro" onerror="this.style.display='none'">
 </div>
 
 <div class="filters">
  <div class="filter-group">
   <label>üìÖ Ano</label>
   <select id="filtroAno"></select>
  </div>
  <div class="filter-group">
   <label>üìÜ M√™s</label>
   <select id="filtroMes"></select>
  </div>
  <div class="filter-group">
   <label>üìä Semana</label>
   <select id="filtroSemana"></select>
  </div>
 </div>
 
 <button class="mode-toggle basic" id="toggleMode">
  <span id="modeIcon">üìä</span>
  <span id="modeText">B√ÅSICO</span>
 </button>
 
 <div class="stats-sidebar">
  <div class="sidebar-stat">
   <span>Assertividade</span>
   <span id="sidebarWinRate">0%</span>
  </div>
  <div class="sidebar-stat">
   <span>Melhor Dia</span>
   <span id="sidebarBestDay">0</span>
  </div>
  <div class="sidebar-stat">
   <span>Pior Dia</span>
   <span id="sidebarWorstDay">0</span>
  </div>
 </div>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">
 <div class="header-main">
  <h1>Dashboard de Trading</h1>
 </div>
 
 <div class="kpis">
  <div class="kpi kpi-dias">
   <span>Dias Operados</span>
   <strong id="kDias">0</strong>
  </div>
  <div class="kpi kpi-trades">
   <span>Total de Trades</span>
   <strong id="kTrades">0</strong>
  </div>
  <div class="kpi kpi-pontos">
   <span>Pontos Totais</span>
   <strong id="kPontos">0</strong>
  </div>
  <div class="kpi kpi-acc">
   <span>Assertividade</span>
   <strong id="kAcc">0%</strong>
  </div>
  <div class="kpi kpi-gains pro-only">
   <span>Gains</span>
   <strong id="kGains" style="color:var(--green)">0</strong>
  </div>
  <div class="kpi kpi-stops pro-only">
   <span>Stops</span>
   <strong id="kStops" style="color:var(--red)">0</strong>
  </div>
  <div class="kpi kpi-zero pro-only">
   <span>Breakeven (0x0)</span>
   <strong id="kZero" style="color:var(--yellow)">0</strong>
  </div>
  <div class="kpi pro-only">
   <span>Contratos por Trade</span>
   <div class="contratos-control">
    <button id="btnMenos" class="btn-control">-</button>
    <div id="valorContratos" class="valor-contratos">0</div>
    <button id="btnMais" class="btn-control">+</button>
   </div>
  </div>
  <div class="kpi pro-only">
   <span>Total em D√≥lar</span>
   <strong id="kDolar" style="color:var(--green)">$0.00</strong>
  </div>
 </div>
 
 <div class="charts pro-only">
  <div class="chart-card">
   <h3>üìà Evolu√ß√£o de Performance</h3>
   <div class="chart-wrap">
    <canvas id="chartAcumulado"></canvas>
   </div>
  </div>
  <div class="chart-card">
   <h3>üìä Distribui√ß√£o de Resultados</h3>
   <div class="chart-wrap">
    <canvas id="chartBar"></canvas>
   </div>
  </div>
 </div>
 
 <div class="calendar-wrapper pro-only">
  <strong>üìÖ Calend√°rio de Trading</strong>
  <div class="calendar-header">
   <div>Dom</div><div>Seg</div><div>Ter</div>
   <div>Qua</div><div>Qui</div><div>Sex</div><div>S√°b</div>
  </div>
  <div class="calendar-grid" id="calendar"></div>
 </div>
 
 <div class="table-card">
  <strong>üìã Hist√≥rico Detalhado de Opera√ß√µes</strong>
  <div class="table-wrap">
   <table>
    <thead>
     <tr>
      <th>Data</th><th>Pontos</th><th>Trades</th>
      <th>Gain</th><th>Stop</th><th>0x0</th>
      <th>Ativo</th><th>Semana</th>
     </tr>
    </thead>
    <tbody id="tbody"></tbody>
   </table>
  </div>
 </div>
</div>
</div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTbyybCny81vfVXQHmtlkKEOHHJ6xJ_pKSG_4ndkK0tH-YocrFeWY7qL41TS1IfvRQjLSbLIILV56OV/pub?output=csv";
const nomesMeses = {
 "01":"Janeiro","02":"Fevereiro","03":"Mar√ßo","04":"Abril",
 "05":"Maio","06":"Junho","07":"Julho","08":"Agosto",
 "09":"Setembro","10":"Outubro","11":"Novembro","12":"Dezembro"
};

const Dashboard = {
 dados: [],
 primeiraCarga: true,
 chartAcumulado: null,
 chartBar: null,
 
 async init() {
  this.inicializarToggleMode();
  await this.carregarDados();
  this.atualizarPerformanceIndicator();
 },
 
 async carregarDados() {
  try {
   const response = await fetch(CSV_URL);
   if (!response.ok) throw new Error('Erro ao carregar dados');
   const texto = await response.text();
   this.processarCSV(texto);
   
   setTimeout(() => {
    document.getElementById('loading').classList.add('hidden');
   }, 500);
  } catch (erro) {
   console.error('Erro:', erro);
   alert('Erro ao carregar dados. Por favor, tente novamente.');
   document.getElementById('loading').classList.add('hidden');
  }
 },
 
 processarCSV(texto) {
  const linhas = texto.trim().split(/\r?\n/);
  linhas.shift(); // Remove header
  
  this.dados = linhas.map(linha => {
   const cols = linha.split(",");
   const [d, m, a] = cols[0].split("/");
   return {
    dia: cols[0],
    data: new Date(a, m-1, d),
    semana: cols[1],
    ativo: cols[2],
    ano: a,
    mes: m,
    pontos: +cols[3] || 0,
    trades: +cols[4] || 0,
    gain: +cols[5] || 0,
    stop: +cols[6] || 0,
    zero: +cols[7] || 0
   };
  }).filter(Boolean);
  
  this.inicializarFiltros();
  
  // Inicializa calculadora depois que tudo estiver renderizado
  setTimeout(() => {
   this.inicializarCalculadora();
  }, 100);
 },
 
 inicializarFiltros() {
  const anos = [...new Set(this.dados.map(d => d.ano))].sort();
  filtroAno.innerHTML = anos.map(a => `<option value="${a}">${a}</option>`).join("");
  
  const anoAtual = new Date().getFullYear().toString();
  filtroAno.value = anos.includes(anoAtual) ? anoAtual : anos[anos.length-1];
  
  filtroAno.onchange = () => {
   this.primeiraCarga = false;
   this.inicializarMeses();
   this.atualizar();
  };
  
  this.inicializarMeses();
 },
 
 inicializarMeses() {
  const meses = [...new Set(this.dados.filter(d => d.ano === filtroAno.value).map(d => d.mes))];
  filtroMes.innerHTML = '<option value="ALL">Todos os meses</option>' +
   meses.map(m => `<option value="${m}">${nomesMeses[m]}</option>`).join("");
  
  const mesAtual = (new Date().getMonth()+1).toString().padStart(2,"0");
  // Na primeira carga, sempre seleciona o m√™s atual para permitir selecionar semana
  if (this.primeiraCarga && meses.includes(mesAtual)) {
   filtroMes.value = mesAtual;
  } else {
   filtroMes.value = "ALL";
  }
  
  filtroMes.onchange = () => {
   this.primeiraCarga = false;
   
   if (filtroMes.value === "ALL") {
    filtroSemana.disabled = true;
    filtroSemana.value = "ALL";
   } else {
    filtroSemana.disabled = false;
   }
   
   this.inicializarSemanas();
   this.atualizar();
  };
  
  if (filtroMes.value === "ALL") {
   filtroSemana.disabled = true;
  }
  
  this.inicializarSemanas();
 },
 
 inicializarSemanas() {
  const semanas = [...new Set(
   this.dados.filter(d =>
    d.ano === filtroAno.value &&
    (filtroMes.value === "ALL" || d.mes === filtroMes.value)
   ).map(d => d.semana)
  )].sort((a,b) => a-b);
  
  filtroSemana.innerHTML = '<option value="ALL">Todas as semanas</option>' +
   semanas.map(s => `<option value="${s}">${s}</option>`).join("");
  
  if (this.primeiraCarga) {
   const hoje = new Date();
   const atual = this.dados.find(d => d.data.toDateString() === hoje.toDateString());
   filtroSemana.value = atual?.semana || "ALL";
  } else {
   filtroSemana.value = "ALL";
  }
  
  filtroSemana.onchange = () => {
   this.primeiraCarga = false;
   this.atualizar();
  };
  
  this.atualizar();
 },
 
 inicializarCalculadora() {
  setTimeout(() => {
   const btnMais = document.getElementById('btnMais');
   const btnMenos = document.getElementById('btnMenos');
   const valorDiv = document.getElementById('valorContratos');
   
   console.log('Tentando inicializar contratos...');
   console.log('btnMais:', btnMais);
   console.log('btnMenos:', btnMenos);
   console.log('valorDiv:', valorDiv);
   
   if (!btnMais || !btnMenos || !valorDiv) {
    console.log('‚ùå Bot√µes de contratos n√£o encontrados (modo b√°sico ativo)');
    return;
   }
   
   let valor = 0; // Come√ßa em 0
   
   // Bot√£o Mais
   btnMais.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    valor++;
    console.log('‚ûï Aumentado para:', valor);
    valorDiv.textContent = valor;
    Dashboard.atualizar();
   });
   
   // Bot√£o Menos
   btnMenos.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    if (valor > 0) { // Pode diminuir at√© 0
     valor--;
     console.log('‚ûñ Diminu√≠do para:', valor);
     valorDiv.textContent = valor;
     Dashboard.atualizar();
    } else {
     console.log('‚ö†Ô∏è Valor m√≠nimo √© 0');
    }
   });
   
   console.log('‚úÖ Controles de contratos configurados com sucesso!');
  }, 500);
 },
 
 inicializarToggleMode() {
  const toggleBtn = document.getElementById('toggleMode');
  const modeIcon = document.getElementById('modeIcon');
  const modeText = document.getElementById('modeText');
  let isProMode = false; // INICIA NO MODO B√ÅSICO
  
  // Define modo B√ÅSICO como padr√£o
  document.body.classList.add('basic-mode');
  toggleBtn.classList.remove('pro');
  toggleBtn.classList.add('basic');
  modeIcon.textContent = 'üìä';
  modeText.textContent = 'B√ÅSICO';
  
  if (toggleBtn) {
   toggleBtn.addEventListener('click', () => {
    isProMode = !isProMode;
    
    if (isProMode) {
     document.body.classList.remove('basic-mode');
     toggleBtn.classList.add('pro');
     toggleBtn.classList.remove('basic');
     modeIcon.textContent = '‚ö°';
     modeText.textContent = 'PRO';
     
     // Re-inicializa o input quando entrar no modo PRO
     setTimeout(() => {
      this.inicializarCalculadora();
     }, 100);
    } else {
     document.body.classList.add('basic-mode');
     toggleBtn.classList.remove('pro');
     toggleBtn.classList.add('basic');
     modeIcon.textContent = 'üìä';
     modeText.textContent = 'B√ÅSICO';
    }
   });
  }
 },
 
 obterDadosFiltrados() {
  return this.dados.filter(d =>
   d.ano === filtroAno.value &&
   (filtroMes.value === "ALL" || d.mes === filtroMes.value) &&
   (filtroSemana.value === "ALL" || d.semana === filtroSemana.value)
  );
 },
 
 atualizar() {
  const dadosFiltrados = this.obterDadosFiltrados();
  this.renderizarKPIs(dadosFiltrados);
  this.renderizarTabela(dadosFiltrados);
  this.renderizarGraficos(dadosFiltrados);
  this.renderizarCalendario(dadosFiltrados);
  this.atualizarSidebarStats(dadosFiltrados);
  this.atualizarPerformanceIndicator(dadosFiltrados);
 },
 
 renderizarKPIs(dados) {
  const totais = dados.reduce((acc, d) => ({
   trades: acc.trades + d.trades,
   pontos: acc.pontos + d.pontos,
   gain: acc.gain + d.gain,
   stop: acc.stop + d.stop,
   zero: acc.zero + d.zero
  }), { trades: 0, pontos: 0, gain: 0, stop: 0, zero: 0 });
  
  const operacoes = totais.gain + totais.stop;
  const assertividade = operacoes ? Math.round((totais.gain / operacoes) * 100) : 0;
  const diasOperados = dados.filter(d => d.trades > 0).length;
  
  // Pega o valor dos contratos da div ao inv√©s do input
  const valorContratosDiv = document.getElementById('valorContratos');
  const contratos = valorContratosDiv ? parseInt(valorContratosDiv.textContent) || 0 : 0;
  const totalDolar = totais.pontos * contratos * 2;
  
  document.getElementById("kDias").textContent = diasOperados;
  document.getElementById("kTrades").textContent = totais.trades;
  document.getElementById("kPontos").textContent = totais.pontos;
  document.getElementById("kAcc").textContent = assertividade + "%";
  
  const kDolar = document.getElementById("kDolar");
  if (kDolar) {
   kDolar.textContent = totalDolar.toLocaleString('en-US', {style: 'currency', currency: 'USD'});
   kDolar.style.color = totalDolar >= 0 ? 'var(--green)' : 'var(--red)';
  }
  
  const kGains = document.getElementById("kGains");
  const kStops = document.getElementById("kStops");
  const kZero = document.getElementById("kZero");
  
  if (kGains) kGains.textContent = totais.gain;
  if (kStops) kStops.textContent = totais.stop;
  if (kZero) kZero.textContent = totais.zero;
 },
 
 atualizarSidebarStats(dados) {
  const totais = dados.reduce((acc, d) => ({
   pontos: acc.pontos + d.pontos,
   gain: acc.gain + d.gain,
   stop: acc.stop + d.stop
  }), { pontos: 0, gain: 0, stop: 0 });
  
  const diasOperados = dados.filter(d => d.trades > 0).length;
  const operacoes = totais.gain + totais.stop;
  const winRate = operacoes ? Math.round((totais.gain / operacoes) * 100) : 0;
  
  const pontosPorDia = dados.filter(d => d.trades > 0).map(d => d.pontos);
  const melhorDia = pontosPorDia.length ? Math.max(...pontosPorDia) : 0;
  const piorDia = pontosPorDia.length ? Math.min(...pontosPorDia) : 0;
  
  const sidebarWinRate = document.getElementById('sidebarWinRate');
  const sidebarBestDay = document.getElementById('sidebarBestDay');
  const sidebarWorstDay = document.getElementById('sidebarWorstDay');
  
  if (sidebarWinRate) sidebarWinRate.textContent = winRate + '%';
  if (sidebarBestDay) {
   sidebarBestDay.textContent = melhorDia;
   sidebarBestDay.style.color = 'var(--green)';
  }
  if (sidebarWorstDay) {
   sidebarWorstDay.textContent = piorDia;
   sidebarWorstDay.style.color = piorDia < 0 ? 'var(--red)' : 'var(--text)';
  }
 },
 
 atualizarPerformanceIndicator(dados = []) {
  const perfIndicator = document.getElementById('perfIndicator');
  const perfText = document.getElementById('perfText');
  const perfDot = perfIndicator?.querySelector('.performance-dot');
  
  if (!perfIndicator || !dados.length) {
   if (perfIndicator) perfIndicator.style.display = 'none';
   return;
  }
  
  const totais = dados.reduce((acc, d) => acc + d.pontos, 0);
  
  perfIndicator.style.display = 'flex';
  
  if (totais > 0) {
   perfText.textContent = `Performance: Positiva (+${totais})`;
   perfDot.className = 'performance-dot positive';
  } else if (totais < 0) {
   perfText.textContent = `Performance: Negativa (${totais})`;
   perfDot.className = 'performance-dot negative';
  } else {
   perfText.textContent = 'Performance: Neutro';
   perfDot.className = 'performance-dot neutral';
  }
 },
 
 renderizarTabela(dados) {
  let html = '';
  let tot = {p:0, t:0, g:0, s:0, z:0};
  
  dados.forEach(d => {
   tot.p += d.pontos; tot.t += d.trades;
   tot.g += d.gain; tot.s += d.stop; tot.z += d.zero;
   
   html += `
    <tr>
     <td>${d.dia}</td>
     <td style="color:${d.pontos<0?'var(--red)':'var(--green)'};font-weight:800">${d.pontos}</td>
     <td>${d.trades}</td>
     <td style="color:var(--green)">${d.gain}</td>
     <td style="color:var(--red)">${d.stop}</td>
     <td style="color:var(--yellow)">${d.zero}</td>
     <td>${d.ativo}</td>
     <td>${d.semana}</td>
    </tr>`;
  });
  
  html += `
   <tr class="total">
    <td>TOTAL</td>
    <td style="color:${tot.p<0?'var(--red)':'var(--green)'}">${tot.p}</td>
    <td>${tot.t}</td>
    <td style="color:var(--green)">${tot.g}</td>
    <td style="color:var(--red)">${tot.s}</td>
    <td style="color:var(--yellow)">${tot.z}</td>
    <td colspan="2"></td>
   </tr>`;
  
  document.getElementById('tbody').innerHTML = html;
 },
 
 renderizarGraficos(dados) {
  let saldo = 0;
  const labels = [];
  const acumulado = [0];
  
  dados.forEach(d => {
   saldo += d.pontos;
   labels.push(d.dia);
   acumulado.push(saldo);
  });
  
  if (this.chartAcumulado) this.chartAcumulado.destroy();
  if (this.chartBar) this.chartBar.destroy();
  
  const ctxAc = document.getElementById('chartAcumulado');
  const ctxBar = document.getElementById('chartBar');
  
  if (ctxAc) {
   this.chartAcumulado = new Chart(ctxAc, {
    type: 'line',
    data: {
     labels: ['In√≠cio', ...labels],
     datasets: [{
      label: 'Pontos Acumulados',
      data: acumulado,
      borderColor: '#6366f1',
      backgroundColor: (context) => {
       const ctx = context.chart.ctx;
       const gradient = ctx.createLinearGradient(0, 0, 0, 400);
       gradient.addColorStop(0, 'rgba(99,102,241,0.3)');
       gradient.addColorStop(1, 'rgba(99,102,241,0.01)');
       return gradient;
      },
      fill: true,
      tension: 0.4,
      borderWidth: 3,
      pointRadius: 4,
      pointHoverRadius: 6,
      pointBackgroundColor: '#6366f1',
      pointBorderColor: '#fff',
      pointBorderWidth: 2
     }]
    },
    options: {
     responsive: true,
     maintainAspectRatio: false,
     interaction: {
      intersect: false,
      mode: 'index'
     },
     plugins: {
      legend: { display: false },
      tooltip: {
       backgroundColor: 'rgba(0,0,0,0.9)',
       titleColor: '#fff',
       bodyColor: '#e5e7eb',
       borderColor: '#6366f1',
       borderWidth: 1,
       padding: 12,
       displayColors: false,
       callbacks: {
        title: (items) => items[0].label,
        label: (item) => `Acumulado: ${item.formattedValue} pts`
       }
      }
     },
     scales: {
      y: {
       ticks: { color: '#9ca3af', font: { family: 'JetBrains Mono', size: 11 } },
       grid: { color: 'rgba(255,255,255,0.05)' }
      },
      x: {
       ticks: { 
        color: '#cbd5e1', 
        maxRotation: 45, 
        font: { size: 11, weight: '600' }
       },
       grid: { display: false }
      }
     }
    }
   });
  }
  
  if (ctxBar) {
   const totalGain = dados.reduce((a,b) => a+b.gain, 0);
   const totalStop = dados.reduce((a,b) => a+b.stop, 0);
   const totalZero = dados.reduce((a,b) => a+b.zero, 0);
   
   this.chartBar = new Chart(ctxBar, {
    type: 'doughnut',
    data: {
     labels: ['Gains', 'Stops', 'Breakeven'],
     datasets: [{
      data: [totalGain, totalStop, totalZero],
      backgroundColor: ['#10b981', '#ef4444', '#fbbf24'],
      borderColor: '#0f1420',
      borderWidth: 3,
      hoverOffset: 10
     }]
    },
    options: {
     responsive: true,
     maintainAspectRatio: false,
     plugins: {
      legend: {
       display: true,
       position: 'bottom',
       labels: {
        color: '#9ca3af',
        padding: 16,
        font: { size: 12, weight: '600' }
       }
      },
      tooltip: {
       backgroundColor: 'rgba(0,0,0,0.9)',
       titleColor: '#fff',
       bodyColor: '#e5e7eb',
       borderColor: '#6366f1',
       borderWidth: 1,
       padding: 12,
       callbacks: {
        label: (item) => `${item.label}: ${item.formattedValue} opera√ß√µes`
       }
      }
     }
    }
   });
  }
 },
 
 renderizarCalendario(dados) {
  const grid = document.getElementById("calendar");
  if (!grid) return;
  
  grid.innerHTML = "";
  if (!dados.length) return;
  
  let base = dados[0];
  if (filtroMes.value !== "ALL") {
   base = dados.find(d => d.mes === filtroMes.value) || dados[0];
  }
  
  const ano = base.data.getFullYear();
  const mes = base.data.getMonth();
  const primeiro = new Date(ano, mes, 1);
  const ultimo = new Date(ano, mes+1, 0);
  
  for (let i = 0; i < primeiro.getDay(); i++) {
   grid.innerHTML += `<div class="day empty"></div>`;
  }
  
  for (let d = 1; d <= ultimo.getDate(); d++) {
   const data = new Date(ano, mes, d);
   const r = dados.find(x => x.data.toDateString() === data.toDateString());
   let cls = "day", pts = "", info = "", badge = "";
   
   if (r) {
    pts = r.pontos;
    if (pts > 0) cls += " positive";
    if (pts < 0) cls += " negative";
    
    // Primeira linha: n√∫mero de trades
    let primeiraLinha = `${r.trades} trade${r.trades !== 1 ? 's' : ''}`;
    
    // Segunda linha: gains, stops e 0x0
    let segundaLinha = [];
    if (r.gain > 0) segundaLinha.push(`${r.gain} gain${r.gain !== 1 ? 's' : ''}`);
    if (r.stop > 0) segundaLinha.push(`${r.stop} stop${r.stop !== 1 ? 's' : ''}`);
    if (r.zero > 0) segundaLinha.push(`${r.zero} 0x0`);
    
    if (segundaLinha.length > 0) {
     info = `${primeiraLinha}<br>${segundaLinha.join(' ‚Ä¢ ')}`;
    } else {
     info = primeiraLinha;
    }
    
    badge = `<div class="day-badge">S${r.semana} ‚Ä¢ ${r.ativo}</div>`;
   }
   
   grid.innerHTML += `
    <div class="${cls}">
     <div class="day-number">${d}</div>
     <div class="day-points"
      style="color:${pts<0?'var(--red)':pts>0?'var(--green)':'var(--muted)'}">
      ${pts || ""}
     </div>
     <div class="day-info">${info}</div>
     ${badge}
    </div>`;
  }
 }
};

// Inicializa√ß√£o
Dashboard.init();

// Easter egg: atalho de teclado para alternar modo
document.addEventListener('keydown', (e) => {
 if (e.ctrlKey && e.key === 'm') {
  e.preventDefault();
  document.getElementById('toggleMode')?.click();
 }
});
</script>
</body>
</html>
